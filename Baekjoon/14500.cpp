#include<bits/stdc++.h>

using namespace std;

const int tset[19][4][4] = {
    {
        {1,0,0,0},
        {1,0,0,0},
        {1,0,0,0},
        {1,0,0,0}        
    },
    {
        {1,1,1,1},
        {0,0,0,0},
        {0,0,0,0},
        {0,0,0,0}
    },
    {
        {1,1,0,0},
        {1,1,0,0},
        {0,0,0,0},
        {0,0,0,0}
    },
    {
        {1,0,0,0},
        {1,0,0,0},
        {1,1,0,0},
        {0,0,0,0}
    },
    {
        {0,1,0,0},
        {0,1,0,0},
        {1,1,0,0},
        {0,0,0,0}
    },
    {
        {1,1,0,0},
        {0,1,0,0},
        {0,1,0,0},
        {0,0,0,0}
    },
    {
        {1,1,0,0},
        {1,0,0,0},
        {1,0,0,0},
        {0,0,0,0}
    },
    {
        {0,0,1,0},
        {1,1,1,0},
        {0,0,0,0},
        {0,0,0,0}
    },
    {
        {1,0,0,0},
        {1,1,1,0},
        {0,0,0,0},
        {0,0,0,0}
    },
    {
        {1,1,1,0},
        {0,0,1,0},
        {0,0,0,0},
        {0,0,0,0}
    },
    {
        {1,1,1,0},
        {1,0,0,0},
        {0,0,0,0},
        {0,0,0,0}
    },
    {
        {1,0,0,0},
        {1,1,0,0},
        {0,1,0,0},
        {0,0,0,0}
    },
    {
        {0,1,1,0},
        {1,1,0,0},
        {0,0,0,0},
        {0,0,0,0}
    },
    {
        {0,1,0,0},
        {1,1,0,0},
        {1,0,0,0},
        {0,0,0,0}
    },
    {
        {1,1,0,0},
        {0,1,1,0},
        {0,0,0,0},
        {0,0,0,0}
    },
    {
        {0,1,0,0},
        {1,1,1,0},
        {0,0,0,0},
        {0,0,0,0}
    },
    {
        {0,1,0,0},
        {1,1,0,0},
        {0,1,0,0},
        {0,0,0,0}
    },
    {
        {1,1,1,0},
        {0,1,0,0},
        {0,0,0,0},
        {0,0,0,0}
    },
    {
        {1,0,0,0},
        {1,1,0,0},
        {1,0,0,0},
        {0,0,0,0}
    }
};

bool isIn(const int tnum, const int y, const int x, const int N, const int M){
    for(int r=0; r<4; ++r)
    for(int c=0; c<4; ++c){
        if(tset[tnum][r][c]&&(y+r>=N || x+c >=M)){
            return false;
        }
    }
    return true;
}

int table[500][500];

int tsum(const int tnum, const int y, const int x){
    int ret = 0;
    for(int r=0; r<4;++r)
    for(int c=0; c<4;++c){
        if(!tset[tnum][r][c]) continue;
        ret += table[y+r][x+c];
    }
    return ret;
}


int main(){
    cin.tie(NULL);
    ios_base::sync_with_stdio(false);
    int N, M, ans=0; cin >> N >> M;
    for(int r=0; r<N; ++r)
    for(int c=0; c<M; ++c){
        cin >> table[r][c];
    }
    for(int r=0; r<N; ++r)
    for(int c=0; c<M; ++c){
        for(int i=0; i<19; ++i){
            if(isIn(i, r, c, N, M)){
                ans = max(ans, tsum(i, r, c));
            }
        }
    }
    cout << ans << endl;
    return 0;
}